\begin{tikzpicture}[scale=0.4,thick,xscale=1] % , baseline = -3.5pt

    \begin{scope}
        [shift={(-15,0)}]
        \draw (-1,-1) rectangle (5,-3);
        \node[anchor=center] (text) at (2,-2) {\corelabelsize $\probtensor$};
        \draw[->-] (0,-3)--(0,-5) node[midway,left] {\colorlabelsize $\catvariableof{0}$};
        \draw[->-] (1.5,-3)--(1.5,-5) node[midway,left] {\colorlabelsize $\catvariableof{1}$};
        \node[anchor=center] (text) at (3,-4) {$\cdots$};
        \draw[->-] (4,-3)--(4,-5) node[midway,right] {\colorlabelsize $\catvariableof{\atomorder\shortminus1}$};

        \node[anchor=center] (text) at (8,-2) {$= \,\frac{1}{\partitionfunction} \cdot $};
    \end{scope}

    %% Condition cores: Boolean cores selecting faces
    \draw[\concolor] (4,3) to[bend right=20] (2,5);
    \draw[\concolor] (0,3) to[bend left=20] (2,5);
    \draw[fill,\concolor] (2,5) circle (\dotsize);

    \draw[\concolor] (-1,1) rectangle (1,3);
    \node[anchor=center,\concolor] (text) at (0,2) {\corelabelsize $\hardactsymbolof{{0}}$};

    \draw[\concolor] (3,1) rectangle (5,3);
    \node[anchor=center,\concolor] (text) at (4,2) {\corelabelsize $\hardactsymbolof{{\seccatorder\shortminus1}}$};

    \draw[->-] (0,-1)--(0,0);
    \node[right] (text) at (0,0) {\colorlabelsize $\headvariableof{0}$};
    \draw[\concolor] (0,0)--(0,1);
    \drawvariabledot{0}{0}
    \node[anchor=center] (text) at (2,0) {$\cdots$};

    \draw[\probcolor] (0,0) -- (-2,0);
    \draw[\probcolor] (-2,1) rectangle (-4,-1);
    \node[anchor=center,\probcolor] (text) at (-3,0) {\corelabelsize $\softactsymbolof{0,\canparam}$};

    \draw[->-] (4,-1)--(4,0);
    \node[left] (text) at (4,0) {\colorlabelsize $\headvariableof{\seccatorder\shortminus1}$};
    \draw[\concolor] (4,0)--(4,1);
    \drawvariabledot{4}{0}

    \draw[\probcolor] (4,0) -- (6,0);
    \draw[\probcolor] (6,1) rectangle (8,-1);
    \node[anchor=center,\probcolor] (text) at (7,0) {\corelabelsize $\softactsymbolof{\seccatorder\shortminus1,\canparam}$};

    \draw (-1,-1) rectangle (5,-3);
    \node[anchor=center] (text) at (2,-2) {\corelabelsize $\bencodingof{\sstat}$};
    \draw[-<-] (0,-3)--(0,-5) node[midway,left] {\colorlabelsize $\catvariableof{0}$};
    \draw[-<-] (1.5,-3)--(1.5,-5) node[midway,left] {\colorlabelsize $\catvariableof{1}$};
    \node[anchor=center] (text) at (3,-4) {$\cdots$};
    \draw[-<-] (4,-3)--(4,-5) node[midway,right] {\colorlabelsize $\catvariableof{\atomorder\shortminus1}$};


\end{tikzpicture}