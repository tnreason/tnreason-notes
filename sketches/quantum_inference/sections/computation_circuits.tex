\section{\ComputationCircuits{}}

We here suggest a quantum pendant to basis encodings (see Chapter~14 in \cite{goessmann_tensor-network_2025}), which has the decomposition by contraction property.

\begin{definition}[\ComputationCircuit{}]
    Given a boolean function $\exformula:\atomstates\rightarrow[2]$ the \computationCircuit{} is the unitary tensor
    \begin{align*}
        \qcbencodingofat{\exformula}{\headvariableof{\insymbol,\exformula},\headvariableof{\outsymbol,\exformula},\shortcatvariables}
        &\quad=
        \sum_{\shortcatindicesin\wcols\exformulaat{\shortcatindices}=1}
        \paulixat{\headvariableof{\insymbol,\exformula},\headvariableof{\outsymbol,\exformula}} \otimes
        \onehotmapofat{\shortcatindices}{\shortcatvariables} \\ % \otimes \onehotmapofat{\shortcatindices}{\catvariableof{\outsymbol,[\atomorder]}} \\
        & \quad \quad \quad +
        \sum_{\shortcatindicesin\wcols\exformulaat{\shortcatindices}=0}
        \identityat{\headvariableof{\insymbol,\exformula},\headvariableof{\outsymbol,\exformula}} \otimes
        \onehotmapofat{\shortcatindices}{\shortcatvariables} \, . % \otimes \onehotmapofat{\shortcatindices}{\catvariableof{\outsymbol,[\atomorder]}}
    \end{align*}
\end{definition}

Notice, that $\qcbencodingof{\lnot} = \mathrm{CNOT}$, which is obvious from $\onesat{\headvariableof{\insymbol},\headvariableof{\outsymbol}} - \identityat{\headvariableof{\insymbol},\headvariableof{\outsymbol}}$ being the Pauli-X gate (not to be confused with $X$ denoting distributed variables here).
The \computationCircuit{} is therefore a generalized controlled $\mathrm{NOT}$ gate, where the control is by a boolean function.

% Multiple output variables
Functions with multiple output variables, i.e. $\exformula:\atomstates\rightarrow\bigtimes_{\selindexin}[2]$, can be encoded image coordinate wise as a concatenation of the respective circuits.

\subsection{Relation with basis encodings}

\BasisEncodings{} are schemes to encode functions into directed boolean tensors, which enable reasoning about functions by tensor network contractions (see \cite{goessmann_tensor_2026}).
To connect with this formalism, let us now show the relation to the \computationCircuits{}.

\begin{lemma}
    \label{lem:bencComCircuit}
    For any boolean function we have (see \figref{fig:bencComCircuit})
    \begin{align*}
        \qcbencodingofat{\exformula}{\headvariableof{\insymbol,\exformula},\headvariableof{\outsymbol,\exformula},\shortcatvariables}
        = \contractionof{
            \bencodingofat{\exformula}{\headvariableof{\exformula},\shortcatvariables},
            \bencodingofat{\oplus}{\headvariableof{\outsymbol,\exformula},\headvariableof{\insymbol,\exformula},\headvariableof{\exformula}}
        }{\headvariableof{\insymbol,\exformula},\headvariableof{\outsymbol,\exformula},\shortcatvariables} \, .
    \end{align*}
\end{lemma}

% Sparse decomposition
In \cite{goessmann_tensor_2026} (and more detailed in \cite{goessmann_tensor-network_2025}) sparse decompositions of \basisEncodings{} have been studied.
Based on the equivalence of \computationCircuits{} and contracted \basisEncodings{}, stated by \lemref{lem:bencComCircuit} we transfer these decomposition schemes in the following.

\begin{figure}[t]
    \begin{center}
        \input{tikz_pics/computation-circuits/bencoding_computation_circuit}
    \end{center}
    \caption{Relation of computation circuit and basis encodings.
    The \computationCircuit{} of a function is the contraction of its \basisEncoding{} with the \basisEncoding{} of the mod2 sum $\oplus$.}
    \label{fig:bencComCircuit}
\end{figure}

\subsection{Composition by Contraction - Exploiting \DecompositionSparsity{}}

The decomposition by contraction property of basis encodings is now a composition of circuits property, as stated in the next lemma.

\begin{lemma}\label{lem:comCirDecSpar}
    We have for functions $\exformula:\atomstates\rightarrow\bigtimes_{\selindexin}[2]$, $\secexfunction:\bigtimes_{\selindexin}[2]\rightarrow\bigtimes_{s\in[r]}[2]$ (see \figref{fig:qcbencodingDecomposition})
    \begin{align*}
        \qcbencodingofat{\secexfunction\circ\exformula}{\headvariableof{\insymbol,\secexfunction\circ\exformula},\headvariableof{\outsymbol,\secexfunction\circ\exformula},\catvariableof{\insymbol,[\atomorder]},\catvariableof{\outsymbol,[\atomorder]}}
        = \breakablecontractionof{
            &\onehotmapofat{0}{\headvariableof{\insymbol,\exformula}},\\
            &\qcbencodingofat{\exformula}{\headvariableof{\insymbol,\exformula},\headvariableof{\outsymbol,\exformula},\catvariableof{\insymbol,[\atomorder]},\catvariableof{\outsymbol,[\atomorder]}},\\
            &\qcbencodingofat{\secexfunction}{\headvariableof{\insymbol,\secexfunction\circ\exformula},\headvariableof{\outsymbol,\secexfunction\circ\exformula},\headvariableof{\outsymbol,\exformula},\headvariableof{\outsymbol,\exformula}}
        }{
            \headvariableof{\insymbol,\secexfunction\circ\exformula},\headvariableof{\outsymbol,\secexfunction\circ\exformula},\catvariableof{\insymbol,[\atomorder]},\catvariableof{\outsymbol,[\atomorder]}
        } \, .
    \end{align*}
\end{lemma}
\begin{proof}
    Can be seen by the basis encoding representation, when starting the hidden qubit with $\fbasis$, since
    \begin{align*}
        \contractionof{\bencodingofat{\oplus}{Y,X_0,X_1},\fbasisat{X_0}}{Y,X_1}
        = \identityat{Y,X_1} \, .
    \end{align*}
    The marginalization of the hidden target qubit $X_1$ for measurements does not change the distribution, since we have a deterministic dependence on the measured data register (need preparation by $\fbasis$ for that).
\end{proof}

When having a syntactical decomposition of a propositional formula, we can iteratively apply the \computationCircuit{} decomposition theorem and prepare each connective by a circuit.
We can decompose any propositional formula into logical connectives and prepare to each a \computationCircuit{} (exploiting further sparsity mechanisms).
This works, when the target qubit of one connective is used as a value qubit of another.

%% Closure of
Note that to exploit \decompositionSparsity{}, we introduce another auxiliary qubit representing the satisfaction of the sub-function $\exformula$.
In \lemref{lem:comCirDecSpar} the equality of the concatenated \computationCircuits{} holds after contraction of this qubit, see also \figref{fig:qcbencodingDecomposition}.
When performing a computational basis measurement on the state prepared by a concatenation, and omitting the qubit (either not measure it in the first place, or ignore its measurement), one effectively has closed the variable before measurement.
This holds true due to the deterministic dependence of the measurement outcome on the measurement of the distributed qubits $\shortcatvariables$, but is not true for more generic concatenations of controlled unitaries.

\begin{figure}
    \begin{center}
        \input{tikz_pics/computation-circuits/decomposition_sparsity}
    \end{center}
    \caption{
        Exploitaition of \DecompositionSparsity{} in \computationCircuit{}s.
    }\label{fig:qcbencodingDecomposition}
\end{figure}


%    \begin{lemma}
%        We have for functions $\exformula:\atomstates\rightarrow\bigtimes_{\selindexin}[2]$, $\secexfunction:\bigtimes_{\selindexin}[2]\rightarrow\bigtimes_{s\in[r]}[2]$
%        \begin{align*}
%            \qcbencodingofat{\secexfunction\circ\exformula}{\catvariableof{\insymbol,[\atomorder]},\catvariableof{\outsymbol,[\atomorder]},\headvariableof{\insymbol,\secexfunction\circ\exformula},\headvariableof{\outsymbol,\secexfunction\circ\exformula}}
%            = \breakablecontractionof{
%                &\onehotmapofat{0}{\headvariableof{\insymbol,\exformula}},\\
%                &\qcbencodingofat{\exformula}{\catvariableof{\insymbol,[\atomorder]},\catvariableof{\outsymbol,[\atomorder]},\headvariableof{\insymbol,\exformula},\headvariableof{\outsymbol,\exformula}},\\
%                &\qcbencodingofat{\secexfunction}{\headvariableof{\outsymbol,\exformula},\headvariableof{\outsymbol,\mathrm{aux}},\headvariableof{\insymbol,\secexfunction\circ\exformula},\headvariableof{\outsymbol,\secexfunction\circ\exformula}}
%            }{
%                \catvariableof{\insymbol,[\atomorder]},\catvariableof{\outsymbol,[\atomorder]},\headvariableof{\insymbol,\secexfunction\circ\exformula},\headvariableof{\outsymbol,\secexfunction\circ\exformula}
%            } \, .
%        \end{align*}
%    \end{lemma}
%Note, that the variables $\headvariableof{\outsymbol,\mathrm{aux}}$ are auxiliar and not left open in the contraction.
%This amounts to not measuring them in a computational basis measurement.

\subsection{Construction for mod2-basis+ CP decompositions - Exploiting \PolynomialSparsity{}}

\begin{lemma}\label{lem:comCircuitCommutative}
    The composition of two \computationCircuits{} to functions $\exfunction$ and $\secexfunction$ (see \figref{fig:mod2ComputationCircuit}), where the \computationCircuits{} share the target qubit, is the \computationCircuit{} of their sum mod2.
    In particular, \computationCircuits{} commute when they have the same target qubit.
\end{lemma}
\begin{proof}
    This follows from the representation of \computationCircuits{} by basis encodings of the corresponding function and the mod2 sum $\oplus$.
\end{proof}

\begin{figure}[t]
    \begin{center}
        \input{tikz_pics/computation-circuits/mod2_sum_computation_circuit}
    \end{center}
    \caption{Equivalence of the composition of \computationCircuits{} with the \computationCircuit{} of their mod2 sum (\lemref{lem:comCircuitCommutative}).}
    \label{fig:mod2ComputationCircuit}
\end{figure}

Concatenating two \computationCircuit{}s, which have the same head qubit, is the \computationCircuit{} of their mod2 sum.

Note that in general controlled unitaries on the same target qubit do not commute.

A basis+ elementary function can be encoded by a single controlled NOT operation with auxiliary $\catvariable$ qubits.

This motivates the mod2-basis+ CP decomposition of tensors, which is exactly the decomposition of boolean polynomials into monomials.
Each monomial is called a terms (products of x or (1-x) factors), and minterms in case that all variables appear.

\begin{definition}
    Given a boolean tensor $\hypercore$, a mod2-basis+ CP decomposition is a collection $\sliceset$ of tuples $(\variableset,\catindexof{\variableset})$ with such that for any $\shortcatindicesin$
    \begin{align*}
        \hypercoreat{\indexedshortcatvariables}
        = \bigoplus_{(\variableset,\catindexof{\variableset})\in\sliceset} \contractionof{\onehotmapofat{\catindexof{\variableset}}{\catvariableof{\variableset}}}{\indexedshortcatvariables} \, .
    \end{align*}
\end{definition}

Using that basis CP decompositions are a special case of basis+ CP decompositions, we get the following rank bound.

\begin{lemma}
    The mod2-basis+ CP rank is bounded by the basis CP rank.
\end{lemma}
\begin{proof}
    Use $\variableset=[\atomorder]$, and $\catindexof{\variableset}$ to each supported state.
    Then the mod2-sum is a usual sum and the basis CP decomposition is also a mod2-basis+ CP decomposition.
\end{proof}

This shows in particular, that any propositional formula can be represented by a mod2-basis+ CP decomposition.

\begin{lemma}
    The \computationCircuit{} to a boolean tensor $\hypercore$ with a mod2-basis+ CP decomposition $\sliceset$ obeys
    \begin{align*}
        &\qcbencodingofat{\hypercore}{
            \headvariableof{\hypercore,\insymbol},\headvariableof{\hypercore,\outsymbol},\catvariableof{[\atomorder],\insymbol},\catvariableof{[\atomorder],\insymbol}
        } \\
        & \quad =
        \breakablecontractionof{
            \{\identityat{\headvariableof{\hypercore,\insymbol},\headvariableof{0}},\identityat{\headvariableof{\hypercore,\outsymbol},\headvariableof{\cardof{\sliceset}-1}}\} \cup
            \{\qcbencodingofat{\onehotmapof{\catindexof{\variableset}}}{
                \headvariableof{\decindex}, \headvariableof{\decindex+1},
                \catvariableof{\variableset,\insymbol},\catvariableof{\variableset,\outsymbol}} \wcols (\variableset,\catindexof{\variableset})\in\sliceset\}
        }{\headvariableof{\hypercore,\insymbol},\headvariableof{\hypercore,\outsymbol},\catvariableof{[\atomorder],\insymbol},\catvariableof{[\atomorder],\outsymbol}}
    \end{align*}
    where $\decindex\in[\cardof{\sliceset}]$ enumerates the tuples in $\sliceset$.
\end{lemma}
\begin{proof}
    Can be seen by the basis encoding representation, and the accociativtiy of the sum mod2 ($\oplus$).
\end{proof}

Each \computationCircuit{} to each boolean monomial can be prepared by a multiple-controlled $\paulixsymbol$ gate and further pairs of $\paulixsymbol$ gates preparing the control state, see \figref{fig:qcbencodingPolynomial}. %where the control qubits are the affected variables and the target qubit is the value qubit.
When we sum monomials wrt modulus 2 calculus, then the preparation is a sequence of such circuits.
In such way, we can prepare the \computationCircuit{} to any propositional formula.
This encoding strategy exploits a modified (by mod2 calculus) \polynomialSparsity{}.

\begin{figure}
    \begin{center}
        \input{tikz_pics/computation-circuits/slice_computation_circuit}
    \end{center}
    \caption{
        Exploitation of \PolynomialSparsity{} in \computationCircuit{}s.
        Here, we use the typical denotation of a muliple-controlled CNOT gate, which control symbols do not indicate Dirac tensors.
    }\label{fig:qcbencodingPolynomial}
\end{figure}

\subsection{Preparation by fine and coarse structure}

Having a mod2-basis+ CP decomposition of rank $r$ to a connective, we need $r$ controlled NOT gates to prepare the basis encoding.
Given a syntactical decomposition of a boolean statistics, we prepare the basis encoding as a circuit with:
\begin{itemize}
    \item \textbf{Fine Structure:} Represent each logical connective based on its mod2-basis+ CP decomposition, as a concatenation of \computationCircuit{}s with the same variables.
    \item \textbf{Coarse Structure:} Arrange the logical connective representing circuits according to the syntactical hypergraph, where parent head variables appear as distributed variables at their children.
\end{itemize}

\subsection{Preparation of function encoding states}

Using the \computationCircuit{} we can prepare two function encoding schemes, depending on the start state.

\subsubsection{Basis encoding}

\begin{definition}
    The basis encoding of a boolean function $\exformula$ is the state
    \begin{align*}
        \basqstateofat{\exformula}{\shortcatvariables,\headvariable}
        = \sqrt{\frac{1}{2^\atomorder}} \sum_{\shortcatindices\in\atomstates} \onehotmapofat{\shortcatindices}{\shortcatvariables}
        \otimes \onehotmapofat{\exformula(\shortcatindices)}{\headvariable} \, .
    \end{align*}
\end{definition}

\begin{lemma}
    When applying the \computationCircuit{} on the initial state
    \begin{align*}
        \sqrt{\frac{1}{2^\atomorder}}\onesat{\shortcatvariables} \otimes \fbasisat{\headvariable} % insymbol?
    \end{align*}
    we get the basis encoding state (see \figref{fig:basSignQstateConstruction}a).
\end{lemma}

\begin{corollary}
    Using \lemref{lem:bencComCircuit} we have
    \begin{align*}
        \basqstateofat{\exformula}{\shortcatvariables,\headvariable}
        = \sqrt{\frac{1}{2^{\catorder}}} \bencodingofat{\exformula}{\shortcatvariables,\headvariable}
    \end{align*}
\end{corollary}

\begin{figure}[t]
    \begin{center}
        \input{tikz_pics/computation-circuits/bas_sign_qstate_construction}
    \end{center}
    \caption{Construction of the basis encoding state (a) and the sign encoding state (b) using the \computationCircuit{} of a function.}\label{fig:basSignQstateConstruction}
\end{figure}

The initial state can be prepared by applying Hadamard gates on all distributed variable qubits and preparing the head variable qubit in the ground state.
The overlap of two basis encoding states (which share the same head variable) is proportional to the contraction of the corresponding formulas.

\begin{lemma}
    \label{lem:basQstateOverlap}
    Let $\formula,\secformula$ be two Boolean formulas on the states of $\shortcatvariables$.
    Then we have
    \begin{align*}
        \contraction{\basqstateofat{\formula}{\shortcatvariables,\headvariable},\basqstateofat{\secexformula}{\shortcatvariables,\headvariable}}
        = \frac{1}{2^{\catorder}} \contraction{\formulawith,\secformulawith} \, .
    \end{align*}
\end{lemma}
\begin{proof}
    We have
    \begin{align*}
        \contraction{\basqstateofat{\formula}{\shortcatvariables,\headvariable},\basqstateofat{\secexformula}{\shortcatvariables,\headvariable}}
        &= \frac{1}{2^{\catorder}}
        \sum_{\shortcatindices\in\shortatomstates} \contraction{\onehotmapofat{\formulaat{\indexedshortcatvariables}}{\headvariable},\onehotmapofat{\secformulaat{\indexedshortcatvariables}}{\headvariable}} \\
        &= \frac{1}{2^{\catorder}} \contraction{\formulawith,\secformulawith} \, .
    \end{align*}
\end{proof}

\subsubsection{Sign encoding}

\begin{definition}
    The sign encoding of a boolean function $\exformula$ is the state
    \begin{align*}
        \signqstateofat{\exformula}{\shortcatvariables,\headvariable}
        = \left(\sqrt{\frac{1}{2^\atomorder}} \sum_{\shortcatindices\in\atomstates} \left(-1\right)^{\exformula(\shortcatindices)} \cdot \onehotmapofat{\shortcatindices}{\shortcatvariables}\right)
        \otimes \sqrt{\frac{1}{2}} \left(\fbasisat{\headvariable} - \tbasisat{\headvariable}\right) \, .
    \end{align*}
\end{definition}

\begin{lemma}
    When applying the \computationCircuit{} on the initial state
    \begin{align*}
        \sqrt{\frac{1}{2^\atomorder}}\onesat{\shortcatvariables}
        \otimes \sqrt{\frac{1}{2}} \left(\fbasisat{\headvariable} - \tbasisat{\headvariable}\right)
    \end{align*}
    we get the basis encoding state (see \figref{fig:basSignQstateConstruction}b).
    Note that the initial state is a Hadamard gate acting on the state $\tbasisat{\headvariable}$.
\end{lemma}

% Preparation of the initial state
The initial state can be prepared by applying Hadamard gates on all distributed variable qubits and preparing the head variable qubit by applying a Hadamard gate on the first basis state, i.e.
\begin{align*}
    \frac{1}{\sqrt{2}} \left( \tbasisat{\headvariableof{\outsymbol}} - \fbasisat{\headvariableof{\outsymbol}} \right)
    = \hgateat{\headvariableof{\outsymbol},\headvariableof{\insymbol}} \fbasisat{\headvariableof{\insymbol}} \, ,
\end{align*}

\begin{lemma}
    \label{lem:signQstateOverlap}
    Let $\formula,\secformula$ be two Boolean formulas on the states of $\shortcatvariables$.
    Then we have
    \begin{align*}
        \contraction{\signqstateofat{\formula}{\shortcatvariables,\headvariable},\signqstateofat{\secexformula}{\shortcatvariables,\headvariable}}
        = \frac{1}{2^{\catorder}} \left(\contraction{\formulawith,\secformulawith}-\contraction{\formulawith,\lnot\secformulawith}\right) \, .
    \end{align*}
\end{lemma}
\begin{proof}
    We have
    \begin{align*}
        \contraction{\signqstateofat{\formula}{\shortcatvariables,\headvariable},\signqstateofat{\secexformula}{\shortcatvariables,\headvariable}}
        &= \frac{1}{2^{\catorder}}
        \sum_{\shortcatindices\in\shortatomstates} (-1)^{\formulaat{\indexedshortcatvariables}+\secformulaat{\indexedshortcatvariables}}  \\
        &= \frac{1}{2^{\catorder}}
        \sum_{\shortcatindices\in\shortatomstates \wcols \formulaat{\indexedshortcatvariables}=\secformulaat{\indexedshortcatvariables}} 1
        + \sum_{\shortcatindices\in\shortatomstates \wcols \formulaat{\indexedshortcatvariables}\neq\secformulaat{\indexedshortcatvariables}} (-1) \\
        &= \frac{1}{2^{\catorder}} \left(\contraction{\formulawith,\secformulawith}-\contraction{\formulawith,\lnot\secformulawith}\right) \, .
    \end{align*}
\end{proof}

Limitations:
\begin{itemize}
    \item The prepared state $\signqstateof{\exformula}$ is distinguished from the state $\signqstateof{\lnot\exformula}$ only by a non-observable phase factor
    \begin{align*}
        \signqstateof{\exformula}
        = (-1) \cdot \signqstateof{\lnot\exformula}
    \end{align*}
    \item With this construction the statistic qubit is disentangled with the distributed qubits.
    Further manipulation of the statistic qubits alone (as we do with \activationCircuits{}) will not retrieve any information about the encoded function.
    \item When doing the sign encoding procedure for multiple formulas, we get a disentangled state of the head variables with the distributed variables encoded in the sign encoding state of $\bigoplus_{\exformulain}\exformula$ (where by $\bigoplus$ we denote the mod2 sum of boolean functions).
\end{itemize}

This encoding is applied in the Deutsch-Josza algorithm \cite{deutsch_rapid_1992}.
% Multiple formulas