\begin{tikzpicture}[scale=0.5, yscale=1, thick] % , baseline = -3.5pt

\draw (-1,1) rectangle (4, 4.5);
\node[anchor=center] (text) at (1.5,2.75) {\small $\bencodingof{\placeholderof{1} \placeholderof{2} \placeholderof{3}}$};
\draw[->] (1.5,4.5)--(1.5,6) node[midway,right] {\tiny $\atomlegindexof{\placeholderof{1} \placeholderof{2} \placeholderof{3}}$}; 

\draw[<-] (4,4)--(5.5,4) node[midway,above] {\tiny $\selindexof{1}$};
\draw[<-] (4,2.75)--(5.5,2.75) node[midway,above] {\tiny $\selindexof{2}$};
\draw[<-] (4,1.5)--(5.5,1.5) node[midway,above] {\tiny $\selindexof{3}$};

\draw[<-] (-0.5,1)--(-0.5,-0.5) node[midway,left] {\tiny $\atomlegindexof{1}$}; 
\draw[<-] (0.75,1)--(0.75,-0.5) node[midway,left] {\tiny $\atomlegindexof{2}$}; 
\draw[<-] (2,1)--(2,-0.5) node[midway,left] {\tiny $\atomlegindexof{3}$}; 
\draw[<-] (3.25,1)--(3.25,-0.5) node[midway,left] {\tiny $\atomlegindexof{4}$}; 


\node[anchor=center] (text) at (6.5,2.75) {${=}$};


\draw (7.5,1) rectangle (10.5,2.5);
\node[anchor=center] (text) at (9,1.75) {\small $\selectorcoreof{\placeholderof{1}}$};
\draw[->] (9,2.5)--(9,3.5) node[midway,left] {\tiny $\atomlegindexof{\placeholderof{1}}$}; 

\draw[<-] (7.75,1)--(7.75,-0.5) node[midway,left] {\tiny $\atomlegindexof{1}$}; 
\draw[<-] (9,1)--(9,-0.5) node[midway,left] {\tiny $\atomlegindexof{2}$}; 
\draw[<-] (10.25,1)--(10.25,-0.5) node[midway,left] {\tiny $\atomlegindexof{3}$}; 
\draw[<-] (10.5,1.75)--(11.5,1.75) node[midway,above] {\tiny $\selindexof{1}$};

\draw (12.5,1) rectangle (15.5,2.5);
\node[anchor=center] (text) at (14,1.75) {\small $\selectorcoreof{\placeholderof{2}}$};
\draw[->] (14,2.5)--(14,3.5) node[midway,left] {\tiny $\atomlegindexof{\placeholderof{2}}$}; 

\draw[<-] (12.75,1)--(12.75,-0.5) node[midway,left] {\tiny $\atomlegindexof{2}$}; 
\draw[<-] (14,1)--(14,-0.5) node[midway,left] {\tiny $\atomlegindexof{3}$}; 
\draw[<-] (15.25,1)--(15.25,-0.5) node[midway,left] {\tiny $\atomlegindexof{4}$}; 
\draw[<-] (15.5,1.75)--(16.5,1.75) node[midway,above] {\tiny $\selindexof{2}$};

\draw (8.5,5) rectangle (14.5,3.5);
\node[anchor=center] (text) at (11.5,4.25) {\small $\bencodingof{\placeholderof{3}}$};
\draw[->] (11.5,5)--(11.5,6) node[midway,left] {\tiny $\atomlegindexof{\placeholderof{1} \placeholderof{2} \placeholderof{3}}$}; 
\draw[<-] (14.5,4.25)--(15.5,4.25) node[midway,above] {\tiny $\selindexof{3}$};


\end{tikzpicture}