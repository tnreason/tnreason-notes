%% CONTRACTIONS
\newcommand{\contractionof}[2]{\left\langle #1\right\rangle_{\left[ #2 \right]}}

\newcommand{\breakablecontractionof}[2]{\big\langle #1 \big\rangle_{\big[ #2 \big]}}
\newcommand{\contraction}[1]{\contractionof{#1}{\varnothing}}
\newcommand{\normalizationofwrt}[3]{\left\langle #1\right\rangle_{\left[ #2 | #3 \right]}}
\newcommand{\breakablenormalizationofwrt}[3]{\big\langle #1 \big\rangle_{\big[ #2 | #3 \big]}}
\newcommand{\breakablenormalizationof}[2]{\breakablenormalizationofwrt{#1}{#2}{\varnothing}}
\newcommand{\normalizationof}[2]{\normalizationofwrt{#1}{#2}{\varnothing}}

\newcommand{\nzcontractionof}[2]{\nonzerocirc\contractionof{#1}{#2}}

%% ENCODING SCHEMES: Coordinate, basis, selection
\newcommand{\cencodingof}[1]{\chi^{#1}}
\newcommand{\cencodingofat}[2]{\cencodingof{#1}\left[#2\right]}
\newcommand{\cencodingwith}{\cencodingofat{\exfunction}{\shortcatvariables}}

\newcommand{\bencodingof}[1]{\beta^{#1}}
\newcommand{\bencodingofat}[2]{\bencodingof{#1}\left[#2\right]}
\newcommand{\bencodingwith}{\bencodingofat{\exfunction}{\headvariableof{\exfunction},\shortcatvariables}}

\newcommand{\sencodingof}[1]{\sigma^{#1}}
\newcommand{\sencodingofat}[2]{\sencodingof{#1}\left[#2\right]}  
\newcommand{\sencodingwith}{\sencodingofat{\exfunction}{\shortcatvariables,\selvariable}}

\newcommand{\bsencodingof}[1]{\bencodingof{\sencodingof{#1}}} % {\bencodingof{#1}}% % Following the convention at the end of notation chapter
\newcommand{\bsencodingofat}[2]{\bencodingofat{\sencodingof{#1}}{#2}} % {\bencodingofat{#1}{#2}}%

\newcommand{\brepresentationof}[1]{\tau^{#1}}
\newcommand{\brepresentationofat}[2]{\brepresentationof{#1}\left[#2\right]}


%% Quantum Computation
\newcommand{\contunitary}{\mathcal{U}}
\newcommand{\contunitaryof}[1]{\contunitary^{#1}}
\newcommand{\contunitaryat}[1]{\contunitary\left[#1\right]}
\newcommand{\contunitaryofat}[2]{\contunitaryof{#1}\left[#2\right]}

\newcommand{\qcbencoding}{\mathcal{C}} % In Nielsen-Chuang and Schuld-Petruccione denoted by U
\newcommand{\qcbencodingof}[1]{\qcbencoding^{#1}}
\newcommand{\qcbencodingofat}[2]{\qcbencoding^{#1}\left[#2\right]}

\newcommand{\qcaencoding}{\mathcal{V}}
\newcommand{\qcaencodingof}[1]{\mathcal{V}^{#1}} % Ancilla encoding
\newcommand{\qcaencodingofat}[2]{\qcaencoding^{#1}\left[#2\right]}

\newcommand{\avariable}{A} % Ancilla variable
\newcommand{\avariableof}[1]{\avariable_{#1}}
\newcommand{\avariables}{\avariableof{[\seldim]}}

\newcommand{\aindex}{a}
\newcommand{\aindexof}[1]{\aindex_{#1}}

%% Further tensors
\newcommand{\softactsymbol}{\alpha}
\newcommand{\softactsymbolof}[1]{\softactsymbol^{#1}}
\newcommand{\softactsymbolofat}[2]{\softactsymbol^{#1}\left[#2\right]}
\newcommand{\softacttensor}{\softactsymbol^\canparam}
\newcommand{\softacttensorat}[1]{\softacttensor\left[#1\right]}
\newcommand{\softacttensorwith}{\softacttensorat{\headvariables}}
\newcommand{\softactleg}{\softactsymbolof{\selindex,\canparam}}
\newcommand{\softactlegat}[1]{\softactleg\left[#1\right]}
\newcommand{\softactlegwith}{\softactsymbolofat{\selindex,\canparam}{\headvariableof{\selindex}}}
%% TO BE DROPPED!
\newcommand{\actcore}{\alpha} % activation of a formula, typical exp
\newcommand{\actcoreof}[1]{\actcore^{#1}}
\newcommand{\actcoreat}[1]{\actcore\left[#1\right]}
\newcommand{\actcoreofat}[2]{\actcore^{#1}[#2]}
\newcommand{\actcorewith}{\softactlegwith}

% \beta -> basis encoding, \gamma -> coordiante encoding

\newcommand{\dirdelta}{\delta}
\newcommand{\dirdeltaof}[1]{\dirdelta^{#1}}
\newcommand{\dirdeltaofat}[2]{\dirdeltaof{#1}\left[#2\right]}
\newcommand{\dirdeltawith}{\dirdeltaofat{[\catorder],\catdim}{\shortcatvariables}}

% Missing: \epsilon, \zeta (check for usage in recovery guarantees)

\newcommand{\onehotmap}{\epsilon}
\newcommand{\onehotmapof}[1]{\onehotmap_{#1}}
\newcommand{\onehotmapofat}[2]{\onehotmap_{#1}\left[#2\right]}
\newcommand{\onehotmapto}[1]{\onehotmapof{#1}} % For encoding of sets, relations
\newcommand{\onehotmapwith}{\onehotmapofat{\shortcatindices}{\shortcatvariables}}
\newcommand{\invonehotmapof}[1]{\onehotmap^{-1}(#1)}
\newcommand{\tbasis}{\onehotmapof{1}}
\newcommand{\tbasisat}[1]{\tbasis\left[#1\right]}
\newcommand{\fbasis}{\onehotmapof{0}}
\newcommand{\fbasisat}[1]{\fbasis\left[#1\right]}

\newcommand{\noisetensor}{\eta}
\newcommand{\noiseat}[1]{\noisetensor\left[#1\right]}
\newcommand{\noiseof}[1]{\noisetensor^{#1,\gendistribution,\datanum}}
\newcommand{\sstatnoise}{\noiseof{\sstat}}
\newcommand{\sstatnoisewith}{\noiseof{\sstat}[\selvariable]}

\newcommand{\canparam}{\theta}
\newcommand{\canparamof}[1]{\canparam_{#1}}
\newcommand{\canparamat}[1]{\canparam\left[#1\right]}
\newcommand{\canparamofat}[2]{\canparamof{#1}\left[#2\right]}
\newcommand{\canparamwith}{\canparamat{\selvariable}}
\newcommand{\indexedcanparam}{\canparamat{\indexedselvariable}}
\newcommand{\canparamwithin}{\canparamwith\in\parspace}

% Missing: \iota

\newcommand{\hardactsymbol}{\kappa}
\newcommand{\hardactsymbolof}[1]{\hardactsymbol^{#1}}
\newcommand{\hardactsymbolofat}[2]{\hardactsymbol^{#1}\left[#2\right]}
\newcommand{\hardacttensor}{\hardactsymbolof{\hardparam}}
\newcommand{\hardacttensorwith}{\hardacttensor\left[\headvariables\right]}
\newcommand{\hardactleg}{\hardactsymbolof{\selindex,\hardparam}}
\newcommand{\hardactlegwith}{\hardactsymbolofat{\selindex,\hardparam}{\headvariableof{\selindex}}}
%% TO BE DROPPED
\newcommand{\kcore}{\hardactsymbol}
\newcommand{\kcoreof}[1]{\hardactsymbolof{#1}}
\newcommand{\kcoreat}[1]{\kcore\left[#1\right]}
\newcommand{\kcoreofat}[2]{\hardactsymbolofat{#1}{#2}}
\newcommand{\kcorewith}{\hardactsymbolofat{\edge}{\catvariableof{\edge}}}

\newcommand{\scalarcore}{\lambda} % Scalar core in CP decompositons
\newcommand{\scalarcoreof}[1]{\scalarcore[#1]}
\newcommand{\scalarcoreat}[1]{\scalarcore[#1]}
\newcommand{\scalarcoreofat}[2]{\scalarcore^{#1}[#2]}
\newcommand{\scalarcorewith}{\scalarcoreat{\decvariable}}

\newcommand{\meanparam}{\mu}
\newcommand{\meanparamof}[1]{\meanparam_{#1}}
\newcommand{\meanparamat}[1]{\meanparam\left[#1\right]}
\newcommand{\meanparamofat}[2]{\meanparamof{#1}\left[#2\right]}
\newcommand{\indexedmeanparam}{\meanparamat{\indexedselvariable}}
\newcommand{\meanparamwith}{\meanparamat{\selvariable}}

\newcommand{\basemeasure}{\nu}
\newcommand{\basemeasureof}[1]{\basemeasure^{#1}}
\newcommand{\basemeasureofat}[2]{\basemeasure^{#1}\left[#2\right]}
\newcommand{\basemeasureat}[1]{\basemeasure\left[#1\right]}
\newcommand{\basemeasurewith}{\basemeasureat{\shortcatvariables}}

\newcommand{\acttensor}{\xi} % Generic activation tensor
\newcommand{\acttensorof}[1]{\acttensor^{#1}}
\newcommand{\acttensorofat}[2]{\acttensor^{#1}\left[#2\right]}
\newcommand{\acttensorat}[1]{\acttensor\left[#1\right]}
\newcommand{\acttensorwith}{\acttensorat{\headvariables}}
\newcommand{\acttensorleg}{\acttensorof{\selindex}}
\newcommand{\acttensorlegat}[1]{\acttensorleg\left[#1\right]}
\newcommand{\acttensorlegwith}{\acttensorleg\left[\headvariableof{\selindex}\right]}
\newcommand{\paracttensor}{\acttensorof{\hybridparam}}
\newcommand{\paracttensorwith}{\acttensorofat{\hybridparam}{\headvariables}}

% Missing: \omicron, \pi

\newcommand{\legcore}{\rho} % Leg core in CP decompositions
\newcommand{\legcoreof}[1]{\legcore^{#1}}
\newcommand{\legcoreofat}[2]{\legcoreof{#1}\left[#2\right]}
\newcommand{\legcorewith}{\legcoreofat{\atomenumerator}{\catvariableof{\atomenumerator},\decvariable}}

% \sigma -> selection encoding

\newcommand{\tnet}{\tau}
\newcommand{\tnetof}[1]{\tnet^{#1}}
\newcommand{\tnetofat}[2]{\tnetof{#1}\left[#2\right]}
\newcommand{\sectnetofat}[2]{\tilde{\tnet}^{#1}\left[#2\right]}

\newcommand{\extnet}{\tnetof{\graph}}
\newcommand{\secextnet}{\tnetof{\tilde{\graph}}}
\newcommand{\extnetat}[1]{\extnet\left[#1\right]}
\newcommand{\extnetwith}{\tnetofat{\graph}{\shortcatvariables}}

\newcommand{\graphtnetwith}{\tnetofat{\graph}{\nodevariables}}

% Missing: \upsilon

\newcommand{\energytensor}{\phi}
\newcommand{\energytensorofat}[2]{\energytensor^{#1}[#2]}
\newcommand{\energytensorof}[1]{\energytensor^{#1}}
\newcommand{\energytensorat}[1]{\energytensor\left[#1\right]}
\newcommand{\expenergy}{\energytensorofat{(\sstat,\canparam,\basemeasure)}{\shortcatvariables}}
\newcommand{\expenergyat}[1]{\energytensorofat{(\sstat,\canparam,\basemeasure)}{#1}}
\newcommand{\energytensorwith}{\energytensorat{\shortcatvariables}}

\newcommand{\phasecore}{\phi} % ! ALSO ENERGY SYMBOL
\newcommand{\phasecoreat}[1]{\phasecore\left[#1\right]}
\newcommand{\phasecorewith}{\phasecoreat{\shortcatvariables}}
\newcommand{\phasecoreof}[1]{\phasecore^{#1}}
\newcommand{\phasecoreofat}[2]{\phasecore^{#1}\left[#2\right]}

\newcommand{\messagesymbol}{\chi}
\newcommand{\mesfromto}[2]{\messagesymbol_{#1 \rightarrow #2}}
\newcommand{\mesfromtowith}[2]{\messagesymbol_{#1 \rightarrow #2}\left[\catvariableof{#1 \cap #2}\right]}
\newcommand{\mesfromtoat}[3]{\mesfromto{#1}{#2}\left[#3\right]}
\newcommand{\messagewith}{\mesfromtowith{\sedge}{\redge}}

\newcommand{\qstate}{\psi}
\newcommand{\qstateof}[1]{\qstate^{#1}}
\newcommand{\qstateat}[1]{\qstate\left[#1\right]}
\newcommand{\qstateofat}[2]{\qstate^{#1}\left[#2\right]}
\newcommand{\qstatewith}{\qstateat{\shortcatvariables}}
\newcommand{\comconqstate}{\qstateof{*}} % complex conjugate
\newcommand{\comconqstateat}[1]{\qstateof{*}\left[#1\right]} % complex conjugate
\newcommand{\comconqstatewith}{\comconqstateat{\shortcatvariables}}

% Missing: \omega (weights)

%% Sets of tensors
\newcommand{\expfamilyof}[1]{\Gamma^{#1}}
\newcommand{\expfamily}{\genexpfamily}
\newcommand{\genexpfamily}{\expfamilyof{\sstat,\basemeasure}}
\newcommand{\expfamilywith}{\expfamilyof{\sstat,\basemeasure}}

\newcommand{\realizabledistsof}[1]{\Lambda^{#1}}
\newcommand{\maxrealizabledistsof}[1]{\realizabledistsof{#1,\maxgraph}}
\newcommand{\elrealizabledistsof}[1]{\realizabledistsof{#1,\elformat}}
\newcommand{\realizabledistswith}{\realizabledistsof{\sstat,\graph}}
\newcommand{\hlnsetof}[1]{\realizabledistsof{#1,\elformat}}

\newcommand{\cansof}[1]{\Lambda^{#1}}
\newcommand{\maxtrivcansof}[1]{\Lambda^{#1,\maxgraph,\trivbm}}
\newcommand{\eltrivcansof}[1]{\Lambda^{#1,\elformat,\trivbm}}




%% MAIN VARIABLES
\newcommand{\indvariable}{O} 
\newcommand{\inddim}{r}
\newcommand{\indindex}{o} % was s
\newcommand{\indenumerator}{l}
\newcommand{\indorder}{n} % number of variables 

\newcommand{\selvariable}{L} 
\newcommand{\seldim}{p}
\newcommand{\selindex}{\ell}
\newcommand{\selenumerator}{s}
\newcommand{\selorder}{n}

\newcommand{\catvariable}{X} 
\newcommand{\catdim}{m}
\newcommand{\catindex}{x} % was i
\newcommand{\catenumerator}{\atomenumerator}
\newcommand{\catorder}{\atomorder}

\newcommand{\headvariable}{Y} % head of a basis encoding
\newcommand{\headdim}{n}
\newcommand{\headindex}{y}

\newcommand{\datvariable}{J} % Can be understood as selvariable selecting a datapoint, catvariable as a random datapoint, indvariable as a abstract object representing the sample, also used at indexvariable!
\newcommand{\datdim}{m}
\newcommand{\datindex}{j}

%% Syntactic Sugar
\newcommand{\indvariableof}[1]{\indvariable_{#1}}
\newcommand{\selvariableof}[1]{\selvariable_{#1}}
\newcommand{\catvariableof}[1]{\catvariable_{#1}}
\newcommand{\headvariableof}[1]{\headvariable_{#1}}

\newcommand{\indvariablelist}{\indvariableof{0},\ldots,\indvariableof{\indorder-1}}
\newcommand{\catvariablelist}{\catvariableof{0},\ldots,\catvariableof{\atomorder-1}}
\newcommand{\selvariablelist}{\selvariableof{0},\ldots,\selvariableof{\selorder-1}}

\newcommand{\shortindvariablelist}{\indvariableof{[\indorder]}}
\newcommand{\shortcatvariablelist}{\catvariableof{[\atomorder]}}
\newcommand{\shortselvariablelist}{\selvariableof{[\selorder]}}

\newcommand{\selindices}{\selindexof{0},\ldots,\selindexof{\selorder-1}}

\newcommand{\shortindindices}{\indindexof{[\indorder]}}
\newcommand{\shortcatindices}{\catindexof{[\catorder]}}
\newcommand{\shortselindices}{\selindexof{[\selorder]}}
\newcommand{\shortheadindices}{\headindexof{[\seldim]}}

\newcommand{\inddimof}[1]{\inddim_{#1}}
\newcommand{\seldimof}[1]{\seldim_{#1}}
\newcommand{\catdimof}[1]{\catdim_{#1}}
\newcommand{\headdimof}[1]{\headdim_{#1}}

\newcommand{\indindexof}[1]{\indindex_{#1}}
\newcommand{\selindexof}[1]{\selindex_{#1}}
\newcommand{\catindexof}[1]{\catindex_{#1}} 
\newcommand{\headindexof}[1]{\headindex_{#1}}

\newcommand{\indindexin}{\indindex\in[\inddim]}
\newcommand{\selindexin}{\selindex\in[\seldim]}
\newcommand{\catindexin}{\catindex\in[\catdim]}
\newcommand{\datindexin}{\datindex\in[\datdim]}

\newcommand{\indindexofin}[1]{\indindexof{#1}\in[\inddimof{#1}]}
\newcommand{\catindexofin}[1]{\catindexof{#1}\in[\catdimof{#1}]}
\newcommand{\selindexofin}[1]{\selindexof{#1}\in[\seldimof{#1}]}
\newcommand{\headindexofin}[1]{\headindexof{#1}\in[\headdimof{#1}]}

\newcommand{\indindexlist}{\indindexof{0},\ldots,\indindexof{\indorder-1}}
\newcommand{\catindexlist}{\catindexof{0},\ldots,\catindexof{\atomorder-1}}
\newcommand{\selindexlist}{\selindexof{0},\ldots,\selindexof{\selorder-1}}

\newcommand{\indenumeratorin}{\indenumerator\in[\indorder]}
\newcommand{\selenumeratorin}{\selenumerator\in[\selorder]}
\newcommand{\catenumeratorin}{\catenumerator\in[\catorder]}

\newcommand{\indexedindvariableof}[1]{\indvariableof{#1}=\indindexof{#1}}
\newcommand{\indexedcatvariableof}[1]{\catvariableof{#1}=\catindexof{#1}}
\newcommand{\indexedselvariableof}[1]{\selvariableof{#1}=\selindexof{#1}}
\newcommand{\indexedheadvariableof}[1]{\headvariableof{#1}=\headindexof{#1}}

\newcommand{\indexedindvariable}{\indexedindvariableof{}}
\newcommand{\indexedcatvariable}{\indexedcatvariableof{}}
\newcommand{\indexedselvariable}{\indexedselvariableof{}}

\newcommand{\catstatesof}[1]{[\catdimof{#1}]}

\newcommand{\catspaceof}[1]{\rr^{\catdimof{#1}}}

\newcommand{\indspace}{\bigotimes_{\indenumeratorin}\rr^{\inddim}}
\newcommand{\catspace}{\bigotimes_{\atomenumeratorin} \rr^{\catdimof{\atomenumerator}}}

\newcommand{\selstates}{\bigtimes_{\selenumeratorin}[\seldimof{\selenumerator}]}
\newcommand{\selvectorspace}{\rr^{\seldim}}
\newcommand{\selspace}{\bigotimes_{\selenumeratorin}\rr^{\seldimof{\selenumerator}}}
%%

\newcommand{\indorderof}[1]{\indorder_{#1}}

\newcommand{\datanum}{\datdim}

\newcommand{\datain}{\datindex\in[\datanum]}
\newcommand{\data}{\{\datapointof{\datindex}\}_{\datindexin}}
\newcommand{\dataaverage}{\frac{1}{\datanum}\sum_{\datindexin}}

\newcommand{\catvariables}{\catvariablelist}
\newcommand{\shortcatvariables}{\shortcatvariablelist}
\newcommand{\indexedshortcatvariables}{\shortcatvariables=\shortcatindices}
\newcommand{\shortcatindicesin}{\shortcatindices\in\facstates}
\newcommand{\shortatomindicesin}{\shortcatindices\in\atomstates}
\newcommand{\datshortcatvariables}{\shortcatvariables=\shortcatindices^{\datindex}}

\newcommand{\headvariables}{\headvariableof{[\seldim]}}
\newcommand{\headstates}{\secfacstates} %% SHOULD BE SELDIM STUFF NOT SECATOMENUMERATOR

\newcommand{\shortindvariables}{\shortindvariablelist}
\newcommand{\indexedshortindvariables}{\shortindvariables=\shortindindices}
\newcommand{\datshortindvariables}{\shortindvariables=\shortindindices^{\datindex}}

\newcommand{\selvariables}{\selvariableof{0},\ldots,\selvariableof{\selorder-1}}
\newcommand{\shortselvariables}{\selvariableof{[\selorder]}}
\newcommand{\indexedshortselvariables}{\shortselvariables=\shortselindices}
\newcommand{\secselenumerator}{\tilde{\selenumerator}}
\newcommand{\secselvariable}{\tilde{\selvariable}}
\newcommand{\secselindex}{\tilde{\selindex}}
\newcommand{\secheadindex}{\tilde{\headindex}}
\newcommand{\secheadindexof}[1]{\secheadindex_{#1}}
\newcommand{\shortselindicesin}{\shortselindices\in\selstates}

\newcommand{\nodestatesof}[1]{\bigtimes_{\node\in#1}\catstatesof{\node}}
\newcommand{\atomstates}{\bigtimes_{\atomenumeratorin}[2]}
\newcommand{\shortatomstates}{[2]^{\catorder}}


\newcommand{\symindstates}{\bigtimes_{\indenumeratorin}[\inddim]}

\newcommand{\facstates}{\bigtimes_{\atomenumeratorin}\catstatesof{\atomenumerator}}
\newcommand{\facdim}{\prod_{\atomenumeratorin}\catdimof{\atomenumerator}}
\newcommand{\secfacstates}{\bigtimes_{\secatomenumerator\in[\secatomorder]}\catstatesof{\secatomenumerator}}

\newcommand{\atomspace}{\bigotimes_{\atomenumeratorin}\rr^2}
\newcommand{\facspace}{\catspace}
\newcommand{\secfacspace}{\bigotimes_{\secatomenumerator\in[\seccatorder]} \rr^{\catdimof{\secatomenumerator}}}

\newcommand{\indexedcatvariables}{\indexedcatvariableof{0},\ldots,\indexedcatvariableof{\atomorder-1}}
\newcommand{\tildeindexedcatvariables}{\catvariableof{0}=\tilde{\catindex}_0,\ldots,\catvariableof{\atomorder-1}=\tilde{\catindex}_{\atomorder-1}} 

\newcommand{\seccatenumerator}{\tilde{\catenumerator}}
\newcommand{\seccatenumeratorin}{\seccatenumerator\in[\catorder]}

\newcommand{\seccatvariable}{Y} % used as differentiation variable
\newcommand{\seccatindex}{y}
\newcommand{\seccatorder}{p} % Has to coincide with seldim for basis encoding def

\newcommand{\thirdcatvariable}{Z}
\newcommand{\thirdcatvariableof}[1]{\thirdcatvariable_{#1}}
\newcommand{\thirdcatindex}{z}
\newcommand{\thirdcatindexof}[1]{\thirdcatindex_{#1}}
\newcommand{\indexedthirdcatvariable}{\thirdcatvariable=\thirdcatindex}
\newcommand{\thirdcatdim}{n}

\newcommand{\seccatvariableof}[1]{\seccatvariable_{#1}}
\newcommand{\indexedseccatvariableof}[1]{\seccatvariableof{#1}=\seccatindexof{#1}}
\newcommand{\seccatvariables}{\seccatvariableof{0},\ldots,\seccatvariableof{\seccatorder\shortminus1}}
\newcommand{\secshortcatvariables}{\seccatvariableof{[\seccatorder]}}
\newcommand{\indexedseccatvariables}{\indexedseccatvariableof{0}\ldots,\indexedseccatvariableof{\seccatorder-1}} 
\newcommand{\indexedsecshortcatvariables}{\indexedseccatvariableof{[\seccatorder]}}

\newcommand{\catvariablesinset}[1]{\catvariableof{#1}}%{\catvariableof{\node} \wcols \node \in #1}
\newcommand{\seccatindexof}[1]{\seccatindex_{#1}}

\newcommand{\catindices}{\catindexlist}
\newcommand{\tildecatvariable}{\tilde{\catvariable}}
\newcommand{\tildecatvariableof}[1]{\tildecatvariable_{#1}}
\newcommand{\tildecatindex}{\tilde{\catindex}}
\newcommand{\tildecatindexof}[1]{\tildecatindex_{#1}}
\newcommand{\tildecatindices}{\tildecatindexof{0},\ldots,\tildecatindexof{\atomorder-1}}
\newcommand{\seccatindices}{{\seccatindexof{0},\ldots,\seccatindexof{\secatomorder-1}}}
\newcommand{\tildeshortcatindices}{\tildecatindexof{[\catorder]}}

\newcommand{\catindicesof}[1]{{\catindexof{0}^{#1},\ldots,\catindexof{\atomorder-1}^{#1}}}

\newcommand{\catzeropositions}{\{\atomenumerator\wcols\catindexof{\atomenumerator}=0\}}
\newcommand{\catonepositions}{\{\atomenumerator\wcols\catindexof{\atomenumerator}=1\}}

\newcommand{\secdecvariable}{\tilde{\decvariable}}
\newcommand{\secdecvariableof}[1]{\secdecvariable_{#1}}
\newcommand{\secdecindexof}[1]{\tilde{\decindex}_{#1}}

%% Cores
\newcommand{\categoricalmap}{e}
\newcommand{\categoricalmapat}[1]{\categoricalmap\left(#1\right)}
\newcommand{\categoricalmapof}[1]{\categoricalmap^{#1}}
\newcommand{\categoricalmapofat}[2]{\categoricalmap^{#1}\left(#2\right)}

\newcommand{\categoricalcore}{\bencodingof{\categoricalmap}}
\newcommand{\categoricalcoreof}[1]{\bencodingof{\categoricalmapof{#1}}}
\newcommand{\categoricalcoreat}[1]{\bencodingof{\categoricalmap}\left[#1\right]}
\newcommand{\categoricalcoreofat}[2]{\bencodingof{\categoricalmapof{#1}}\left[#2\right]}

\newcommand{\datamap}{D}
\newcommand{\datamapat}[1]{\datamap(#1)}
\newcommand{\datamapof}[1]{\datamap_{#1}}
\newcommand{\datapointof}[1]{\datamapat{#1}}
\newcommand{\datapoint}{\datapointof{\datindex}}
\newcommand{\dataset}{\left((\catindicesof{\datindex})\,:\,\datindexin\right)}

\newcommand{\secdatamap}{\tilde{\datamap}}
\newcommand{\datacore}{\bencodingof{\datamap}}
\newcommand{\datacoreat}[1]{\datacore\left[#1\right]}
\newcommand{\datacoreof}[1]{\bencodingof{\datamap_{#1}}}
\newcommand{\datacoreofat}[2]{\bencodingof{\datamap_{#1}}[#2]}

\newcommand{\secdatacoreof}[1]{\bencodingof{\secdatamap_{#1}}}
\newcommand{\empdistribution}{\probtensor^{\datamap}}
\newcommand{\empdistributionat}[1]{\empdistribution\left[#1\right]}
\newcommand{\empdistributionwith}{\empdistributionat{\shortcatvariables}}

\newcommand{\varcore}[1]{U^{#1}} % For optimization of tensor network
\newcommand{\varspace}[1]{\rr^{p_{#1}}}
\newcommand{\varcollection}{\big\{\varcore{\atomenumerator}\, :\, \atomenumeratorin \big\}}

% DecompositionIndex 
\newcommand{\decvariable}{I}
\newcommand{\decvariableof}[1]{\decvariable_{#1}}
\newcommand{\decindex}{i} % Needs to be different to datindex!
\newcommand{\decindexof}[1]{\decindex_{#1}}
\newcommand{\indexeddecvariableof}[1]{\decvariableof{#1}=\decindexof{#1}}
\newcommand{\decdim}{n}
\newcommand{\decdimof}[1]{\decdim_{#1}}
\newcommand{\decindexin}{\decindex\in[\decdim]}
\newcommand{\indexeddecvariable}{\decvariable=\decindex}
\newcommand{\inddecvar}{\indexeddecvariable}

\newcommand{\indexeddatvariable}{\datvariable=\datindex}

% Used in poly sparsity
\newcommand{\indexvariable}{\datvariable} % for datacores used
\newcommand{\indexset}{J}
\newcommand{\indexsetof}[1]{\indexset^{#1}}

\newcommand{\slackvariable}{z}
\newcommand{\slackindex}{z}
\newcommand{\slackindexof}[1]{\slackindex_{#1}}

\newcommand{\rankofat}[2]{\mathrm{rank}^{#1}\left(#2\right)}
\newcommand{\cprankof}[1]{\mathrm{rank}\left(#1\right)}
\newcommand{\bincprankof}[1]{\mathrm{rank}^{\mathrm{bin}}\left(#1\right)}
\newcommand{\polsparsityof}[1]{\slicerankwrtof{\catorder}{#1}} % former {\tilde{\ell} \left(#1\right)}


\newcommand{\dircprankof}[1]{\mathrm{rank}^{\mathrm{dir}}\left(#1\right)}
\newcommand{\bascprankof}[1]{\mathrm{rank}^{\mathrm{bas}}\left(#1\right)}
\newcommand{\baspluscprankof}[1]{\mathrm{rank}^{\mathrm{bas+}}\left(#1\right)}
\newcommand{\quacprankof}[1]{\mathrm{rank}^{\mathrm{qua}}\left(#1\right)}

\newcommand{\sliceset}{\mathcal{M}}
\newcommand{\slicescalar}{\lambda}
\newcommand{\slicescalarof}[1]{\slicescalar^{#1}}
\newcommand{\slicetupleof}[1]{(\slicescalar^{#1}, \variablesetof{#1}, \catindexof{\variablesetof{#1}}^{#1})}
\newcommand{\enumeratedslices}{\{\slicetupleof{\decindex} \wcols \decindexin\}}

\newcommand{\sliceorder}{r}
\newcommand{\slicerankwrtof}[2]{\mathrm{rank}^{\mathrm{bas+},#1}\left(#2\right)}
